/* ═══════════════════════════════════════
   기본 테마 및 레이아웃 설정
   ═══════════════════════════════════════ */

:root{
  --bg:#f6f4ef;--bg-side:#f0ede7;--bg-white:#fdfcfa;--bg-card:#ffffff;
  --border:#e4e0d8;--border-l:#ebe8e2;
  --tx:#2c2922;--tx-d:#5c5548;--tx-m:#9a9488;--tx-hint:#bbb4a8;
  --ac:#b08968;--ac-d:#96724e;--ac-light:#d4b896;
  --red:#c05050;--yellow:#fbbf24;
  --dayone-blue:#3EBCF8;
  --dayone-blue-dark:#2ba5e0;
  --dayone-gray:#bebebe;
  --r:6px;--r-sm:4px;
  --side-w:280px;--list-w:380px;
  --shadow:0 1px 3px rgba(0,0,0,.06);
}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:'Pretendard',-apple-system,sans-serif;background:var(--bg);color:var(--tx);min-height:100vh;overflow:hidden}

/* ═══ LOGIN & LOADING ═══ */
#lockScreen,#loadingScreen{position:fixed;inset:0;background:var(--bg);z-index:9999;display:flex;align-items:center;justify-content:center;flex-direction:column;transition:opacity .3s}
#lockScreen.hidden,#loadingScreen.hidden{display:none;opacity:0;pointer-events:none}
.lock-card{background:var(--bg-white);padding:40px 30px;border-radius:12px;box-shadow:var(--shadow);border:1px solid var(--border);display:flex;flex-direction:column;align-items:center;text-align:center;width:90%;max-width:320px;gap:12px}
.lock-brand{font-family:'Noto Serif KR',serif;font-size:22px;font-weight:700;color:var(--tx)}
.lock-desc{font-size:13px;color:var(--tx-m);margin-bottom:12px}
.lock-err{font-size:12px;color:var(--red);min-height:18px;font-weight:500}

/* Bouncing Loading Animation */
.loading-wrapper { display: flex; flex-direction: column; align-items: center; justify-content: center; }
.loading-scene { position: relative; height: 140px; width: 120px; }
.bounce-avatar { width: 90px; height: 90px; border-radius: 50%; border: 3px solid white; box-shadow: 0 6px 20px rgba(0,0,0,.12); object-fit: cover; position: absolute; top: 0; left: 50%; margin-left: -45px; animation: bounce 0.45s ease-in infinite alternate; z-index: 2; }
.bounce-shadow { width: 60px; height: 12px; border-radius: 50%; background: radial-gradient(ellipse at center, rgba(150,114,78,.35) 0%, transparent 75%); position: absolute; bottom: 0; left: 50%; margin-left: -30px; animation: shadow-pulse 0.45s ease-in infinite alternate; z-index: 1; }
.loading-text { font-size: 14px; color: var(--tx-m); letter-spacing: .5px; margin-top: 12px; font-weight: 600; text-align: center; animation: fade-text 1.4s ease-in-out infinite; }

@keyframes bounce {
  0%   { transform: translateY(0px); }
  100% { transform: translateY(40px); } 
}
@keyframes shadow-pulse {
  0%   { transform: scale(0.5); opacity: 0.2; }  
  100% { transform: scale(1.1); opacity: 0.85; } 
}
@keyframes fade-text {
  0%, 100% { opacity: 0.4; }
  50%      { opacity: 0.9; }
}

/* ═══════════════════════════════════════
   PC LAYOUT 
   ═══════════════════════════════════════ */
.app{display:flex;height:100vh}
.col-header{height:60px;min-height:60px;border-bottom:1px solid var(--border);display:flex;align-items:center;padding:0 16px}

/* Sidebar */
.side{width:var(--side-w);min-width:var(--side-w);background:var(--bg-side);border-right:1px solid var(--border);display:flex;flex-direction:column;overflow:hidden;z-index:30}
@media (min-width: 769px) {
  .side { transition: width 0.3s cubic-bezier(0.2,0.8,0.2,1), min-width 0.3s cubic-bezier(0.2,0.8,0.2,1), opacity 0.2s; }
  .app.sidebar-closed .side { width: 0 !important; min-width: 0 !important; opacity: 0; border-right-width: 0; pointer-events: none; }
}
.side-hdr{display:flex;align-items:center;padding:0 20px;height:60px;min-height:60px;border-bottom:1px solid var(--border);gap:12px}
.brand-wrap{display:flex;align-items:center;gap:12px}
.brand{display:none}
.cat-avatar{width:42px;height:42px;border-radius:50%;object-fit:cover;background:linear-gradient(135deg,#e8ddd0,#d0c4b4);box-shadow:0 2px 8px rgba(0,0,0,.08);flex-shrink:0}
.sync-row{margin-left:auto;display:flex;align-items:center;gap:5px}
.sync-status{font-size:10px;font-family:'JetBrains Mono',monospace;color:#7a9968;cursor:pointer;padding:3px 8px;border-radius:10px;transition:.2s;display:flex;align-items:center;gap:5px}
.sync-status:hover{background:rgba(0,0,0,.04)}
#syncDot{display:inline-block;width:5px;height:5px;border-radius:50%;background:#7a9968}
.sync-btn{display:none}

.side-scroll{flex:1;overflow-y:auto;padding-bottom:16px}
.sec{padding:14px 20px}
.sec-border{border-bottom:1px solid var(--border)}
.sec-t{font-size:12px;font-weight:500;letter-spacing:.8px;text-transform:uppercase;color:var(--tx-m);margin-bottom:8px}

/* PC 어구록 */
.quote-section{padding:16px 20px}
.q-card{cursor:pointer;transition:.2s;padding:14px 20px;border-left:none;background:none;box-shadow:none;border-radius:0;display:block}
.q-card:hover{opacity:.8}
.q-text{font-family:'Noto Serif KR',serif;font-size:14px;font-weight:400;line-height:1.75;color:var(--tx);word-break:keep-all}
.q-by{font-size:10.5px;color:var(--tx-m);margin-top:5px;font-weight:400}
.quote-mark{display:none}
.quote-label{display:none}

/* PC 글쓰기 메뉴 */
.side-nav{padding:0;border-bottom:1px solid var(--border)}
.writing-grid{display:flex;flex-direction:column;padding:14px 20px}
.side-menu{display:flex;align-items:center;justify-content:space-between;padding:7px 10px;border-radius:var(--r);cursor:pointer;transition:.12s;font-size:14px;font-family:'Pretendard',sans-serif;color:var(--tx-d);background:none;border:none;width:100%;text-align:left;font-weight:400;margin-bottom:0;position:relative}
.side-menu:hover{background:rgba(0,0,0,.03)}
.side-menu.on{background:#ede8e0;color:var(--tx);font-weight:400}
.side-menu-l{font-weight:inherit}
.badge-pill{font-size:12px;color:var(--tx-hint);font-family:'JetBrains Mono',monospace;font-weight:400}
.side-menu.on .badge-pill{color:var(--ac-d);font-weight:500}
.wi-arrow{display:none}
.side-menu::before{display:none}

/* 검색 하이라이트 */
mark.highlight { background-color: rgba(251, 191, 36, 0.45); color: inherit; padding: 0 2px; border-radius: 3px; box-shadow: 0 0 0 1px rgba(251,191,36,.2); }

/* PC 루틴 */
.chk-table{display:flex;flex-direction:column;gap:4px}
.chk-week-hdr{display:flex;margin-bottom:3px}
.chk-week-hdr-spacer{width:100px;flex-shrink:0}
.chk-week-hdr .day-labels{display:flex;flex:1}
.chk-week-hdr .day-lbl{flex:1;text-align:center;font-size:9px;color:var(--tx-hint);font-family:'JetBrains Mono',monospace;font-weight:400}
.chk-row{display:flex;align-items:center;border-radius:10px;cursor:pointer;position:relative;overflow:hidden;height:52px;background:var(--bg-white);border:1px solid var(--border-l);transition:.15s;user-select:none}
.chk-row:hover{border-color:var(--border)}
.chk-blob{position:absolute;border-radius:50%;pointer-events:none;opacity:.22}
.chk-pct{position:absolute;top:6px;left:9px;font-size:7px;font-weight:700;font-family:'JetBrains Mono',monospace;color:rgba(0,0,0,.25);z-index:2}
.chk-left{width:100px;flex-shrink:0;z-index:1;padding:0 4px 0 11px;display:flex;align-items:center}
.chk-lb{font-size:12px;font-weight:400;color:var(--tx);white-space:nowrap}
.chk-dots{display:flex;flex:1;z-index:1;align-items:center;justify-content:space-around;padding-right:6px}
.chk-dot{width:18px;height:18px;flex-shrink:0;display:flex;align-items:center;justify-content:center;background:none;border:none;cursor:pointer}
.chk-dot::before{content:'';display:block;width:4px;height:4px;border-radius:50%;border:1px solid #bbb}
.chk-dot.done::before{display:none}
.chk-dot.done::after{content:'✓';font-size:14px;font-weight:500;color:var(--ac);font-family:-apple-system,sans-serif;line-height:1}
.chk-dot.today::before{border-color:var(--ac);width:5px;height:5px}
.chk-dot.today.done::before{display:none}
.chk-dot.today.done::after{color:var(--ac)}

/* PC 기록 */
.st-card{background:none;border-radius:0;padding:0;box-shadow:none;border:none;margin-bottom:0}
.stats-wrap{display:flex;gap:0}
.stat-col{flex:1;display:flex;flex-direction:column;align-items:center;text-align:center;gap:4px;padding:0 12px}
.stat-col+.stat-col{border-left:1px solid var(--border-l)}
.stat-label{font-size:10px;font-weight:500;color:var(--tx-m);margin-bottom:6px}
.stat-big{font-size:22px;font-weight:400;font-family:'JetBrains Mono',monospace;color:var(--tx);line-height:1.1;letter-spacing:-1px}
.stat-sub{font-size:11px;color:var(--tx-hint);margin-top:4px}
.stat-big .unit{font-size:14px;letter-spacing:0;color:var(--tx-m);font-family:'Pretendard',sans-serif}

/* ═══ List Panel (PC & Mobile) ═══ */
.list-panel{width:var(--list-w);min-width:340px;background:var(--bg);border-right:1px solid var(--border);display:flex;flex-direction:column;overflow:hidden;position:relative}

.lp-hdr{
  height:60px;min-height:60px;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 12px;gap:0;
  border-bottom:1px solid var(--border);
  background:var(--bg);
  position:relative;
}
.sb-toggle{
  width:38px;height:38px;
  display:flex;align-items:center;justify-content:center;
  background:none;border:none;cursor:pointer;
  color:var(--tx-m);border-radius:8px;transition:.12s;flex-shrink:0;
}
.sb-toggle:hover{background:rgba(0,0,0,.05);color:var(--tx-d);}
.sb-toggle svg{width:20px;height:20px;stroke:currentColor;stroke-width:1.8;fill:none;stroke-linecap:round;stroke-linejoin:round;}

.view-switcher{
  display:flex;align-items:center;
  background:rgba(0,0,0,.07);border-radius:9px;
  padding:3px;gap:1px;
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  z-index:2;
}
.vs-btn{
  width:38px;height:30px;
  display:flex;align-items:center;justify-content:center;
  border-radius:7px;border:none;background:transparent;
  cursor:pointer;color:var(--tx-m);transition:.15s;
}
.vs-btn svg{width:17px;height:17px;stroke:currentColor;stroke-width:1.8;fill:none;stroke-linecap:round;stroke-linejoin:round;}
.vs-btn.on{background:var(--bg-white);color:var(--tx-d);box-shadow:0 1px 4px rgba(0,0,0,.12);}

.search-bar { display:flex; align-items:center; background:transparent; border-radius:16px; transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1); overflow:hidden; border:1px solid transparent; position:relative; z-index:3; }
.search-bar.active { background:var(--bg-white); border-color:var(--border); padding-right:8px; box-shadow:inset 0 1px 2px rgba(0,0,0,0.02); }
.search-icon-btn { width:38px; height:38px; display:flex; align-items:center; justify-content:center; background:none; border:none; cursor:pointer; color:var(--tx-m); border-radius:8px; transition:all 0.2s; flex-shrink:0; }
.search-icon-btn:hover { background:rgba(0,0,0,.05); color:var(--tx-d); }
.search-bar.active .search-icon-btn { color:var(--ac); background:transparent; }
.search-bar input { width:0; border:none; background:transparent; outline:none; font-size:13px; color:var(--tx); font-family:'Pretendard',sans-serif; transition:width 0.3s cubic-bezier(0.4, 0, 0.2, 1); padding:0; }
.search-bar.active input { width:130px; padding-left:2px; }
.search-bar input::placeholder { color:var(--tx-hint); }
#clearSearchBtn { display:none; background:var(--border); border:none; cursor:pointer; color:var(--tx-d); font-size:10px; width:16px; height:16px; border-radius:50%; margin-left:4px; align-items:center; justify-content:center; flex-shrink:0; }

.pane-list{flex:1;overflow-y:auto;display:flex;flex-direction:column;padding-bottom:60px;}
.pane-photo{flex:1;overflow-y:auto;display:none;padding-bottom:60px;}
.pane-calendar{flex:1;overflow-y:auto;display:none;padding-bottom:60px;}

.lp-pin-hdr{
  font-size:10.5px;font-weight:600;color:var(--tx-hint);
  padding:0 14px;height:34px;min-height:34px;
  display:flex;align-items:center;gap:5px;
  position:sticky;top:0;background:var(--bg);z-index:5;
  border-bottom:1px solid var(--border-l);letter-spacing:.3px;
}
.lp-month-hdr{
  font-size:10.5px;font-weight:600;color:var(--tx-m);
  padding:0 14px;height:34px;min-height:34px;
  display:flex;align-items:center;
  position:sticky;top:0;background:var(--bg);z-index:5;
  border-bottom:1px solid var(--border-l);
}
.lp-item{
  display:flex;padding:11px 14px;gap:11px;
  cursor:pointer;border-bottom:1px solid var(--border-l);
  border-left:3px solid transparent;transition:.1s;align-items:flex-start;position:relative;
}
.lp-item:hover{background:rgba(0,0,0,.015);}
.lp-item.on{background:rgba(176,137,104,.1);}
.lp-date-wrap{text-align:center;min-width:40px;display:flex;flex-direction:column;align-items:center;}
.lp-dow{font-size:10px;color:var(--tx-hint);font-weight:500;}
.lp-day{font-size:18px;font-weight:700;color:var(--tx-d);line-height:1.1;}
.lp-text-wrap{flex:1;min-width:0;display:flex;flex-direction:column;gap:2px;}
.lp-item-title{font-size:13.5px;font-weight:700;color:var(--tx);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.lp-item-tags{font-size:11px;color:#8ba57c;font-weight:600;letter-spacing:-.2px;}
.lp-item-preview{font-size:12.5px;color:var(--tx-m);overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;line-height:1.5;}
.lp-item-meta{font-size:10px;color:var(--tx-hint);margin-top:2px;}
.lp-thumb{
  width:52px;min-width:52px;height:52px;border-radius:6px;
  align-self:center;overflow:hidden;
  display:flex;align-items:center;justify-content:center;font-size:22px;
}
.quote-txt{font-size:12.5px;font-family:'Noto Serif KR',serif;line-height:1.6;color:var(--tx-d);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;}

.lp-item-actions{position:absolute;top:10px;right:12px;display:flex;gap:1px;opacity:0;transition:opacity .15s}
.lp-item:hover .lp-item-actions{opacity:1}
.lp-action-btn{width:24px;height:24px;border-radius:4px;border:none;background:none;cursor:pointer;display:flex;align-items:center;justify-content:center;color:var(--tx-hint);transition:.12s;padding:0}
.lp-action-btn:hover{background:rgba(0,0,0,.05);color:var(--tx-m)}
.lp-action-btn.pin.on{color:var(--ac)}
.lp-action-btn.del:hover{color:var(--red)}
.lp-action-btn svg{width:13px;height:13px;stroke:currentColor;stroke-width:1.8;fill:none;stroke-linecap:round;stroke-linejoin:round}
.lp-action-btn.pin.on svg{fill:currentColor}

.swipe-actions{display:none}
.fab-btn{display:none}

/* 사진 그리드 */
.photo-grid{
  padding: 6px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
}
.photo-cell{
  position: relative;
  aspect-ratio: 1;
  overflow: hidden;
  cursor: pointer;
  border-radius: 14px;
  background: #e8e4dc;
  transition: transform .15s;
}
.photo-cell::before{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(to top,rgba(0,0,0,.55) 0%,rgba(0,0,0,.1) 40%,transparent 60%);
  z-index:1;
  pointer-events:none;
}
.photo-cell.solo {
  grid-column: 1 / -1;
  aspect-ratio: 16 / 9;
}
.photo-cell:active { transform: scale(.98); }
.photo-cell-bg{
  position: absolute; inset: 0;
  background-size: cover;
  background-position: center;
  transition: transform .3s ease;
  width: 100%; height: 100%;
}
.photo-cell:hover .photo-cell-bg { transform: scale(1.04); }
.photo-cell.selected::after {
  content: '';
  position: absolute; inset: 0;
  border: 3.5px solid #3db8f5;
  border-radius: 12px;
  pointer-events: none;
  z-index: 3;
}
.photo-date-block{
  position: absolute;
  right: 12px; bottom: 10px;
  text-align: right;
  pointer-events: none;
  line-height: 1;
  z-index: 2;
}
.photo-day-num{
  display: block;
  font-family: 'Pretendard', sans-serif;
  font-size: 34px;
  font-weight: 400;
  color: white;
  letter-spacing: -1.5px;
  line-height: 1;
  text-shadow: none;
}
.photo-cell.solo .photo-day-num { font-size: 56px; }
.photo-ym{
  display: block;
  font-size: 11px;
  font-weight: 600;
  color: rgba(255,255,255,.9);
  margin-top: 2px;
  letter-spacing: .2px;
}
.photo-cell.solo .photo-ym { font-size: 13px; }

/* 캘린더 */
.cal-wrap { padding: 0 0 20px; }
.cal-month-title { 
  font-size: 18px; font-weight: 700; color: var(--tx); 
  padding: 24px 20px 16px; 
  letter-spacing: -0.3px;
}
.cal-dow-row { 
  display: grid; grid-template-columns: repeat(7, 1fr); 
  padding: 0 16px 10px; gap: 10px;
}
.cal-dow { 
  font-size: 13px; color: var(--tx-d); 
  text-align: center; font-weight: 500; 
}
.cal-grid { 
  display: grid; grid-template-columns: repeat(7, 1fr); 
  gap: 10px; 
  padding: 0 16px 16px; 
}
.cal-day {
  aspect-ratio: 1; position: relative; display: flex; align-items: center; justify-content: center;
  cursor: pointer; 
  border-radius: 10px;
  font-size: 15px; color: var(--tx); 
  font-weight: 400;
  transition: all .15s ease;
  box-sizing: border-box;
}
.cal-day:active { transform: scale(.92); }
.cal-day.empty { cursor: default; }
.cal-day:hover:not(.empty):not(.selected):not(.has-entry) { background: rgba(0,0,0,.04); }
.cal-day.has-entry { 
  background: var(--dayone-blue); 
  color: white; 
  font-weight: 500; 
}
.cal-day.selected {
  background: var(--dayone-gray);
  color: white;
  font-weight: 600;
  border: 3px solid var(--dayone-blue);
  z-index: 5;
}
.cal-day.has-entry.selected {
  background: var(--dayone-blue);
  border: 3px solid var(--dayone-blue-dark);
  color: white;
}
.cal-day.today:not(.has-entry):not(.selected) { 
  color: var(--dayone-blue); 
  font-weight: 700; 
}
.cal-separator{height:1px;background:var(--border-l);margin:0 14px;}

/* ═══ Editor (PC) ═══ */
.editor{flex:1;display:flex;flex-direction:column;background:var(--bg-white);overflow:hidden;position:relative}
.ed-topbar{height:60px;min-height:60px;display:flex;align-items:center;justify-content:space-between;padding:0 20px;border-bottom:1px solid var(--border);background:var(--bg-white);position:relative}
.ed-topbar-left{display:flex;align-items:center;gap:12px}
.ed-save-status{font-size:12px;color:var(--tx-m);font-family:'JetBrains Mono',monospace}
.ed-header-date{font-size:12px;color:var(--tx-m);font-weight:400;position:absolute;left:50%;transform:translateX(-50%)}
.ed-topbar-right{display:flex;gap:8px;align-items:center}
.ed-top-btn{padding:5px 12px;font-size:12px;font-weight:500;color:white;background:var(--ac);border:none;border-radius:var(--r);cursor:pointer;transition:.15s}
.ed-top-btn:hover{opacity:.85}
.ed-btn-done{display:none}

.toolbar{display:flex;align-items:center;padding:6px 16px;border-bottom:1px solid var(--border);background:var(--bg-white);gap:2px;flex-wrap:nowrap;overflow:visible;position:relative;z-index:10}
.tb-sep{width:1px;height:16px;background:var(--border-l);margin:0 4px;flex-shrink:0}
.tb-heading-btn{display:flex;align-items:center;gap:5px;padding:5px 10px;border-radius:5px;border:1px solid transparent;cursor:pointer;color:var(--tx-d);font-size:13px;font-weight:600;font-family:'Pretendard',sans-serif;background:none;transition:.12s;white-space:nowrap;flex-shrink:0;position:relative}
.tb-heading-btn:hover{background:rgba(0,0,0,.03);border-color:var(--border-l)}
.tb-heading-btn svg{width:14px;height:14px;stroke:currentColor;stroke-width:2;fill:none}
.tb-heading-btn .caret{width:10px;height:10px;stroke:var(--tx-m)}
.tb-btn{width:32px;height:30px;display:flex;align-items:center;justify-content:center;background:none;border:1px solid transparent;border-radius:5px;cursor:pointer;color:var(--tx-m);transition:.12s;flex-shrink:0}
.tb-btn:hover{background:rgba(0,0,0,.03);border-color:var(--border-l);color:var(--tx-d)}
.tb-btn svg{width:16px;height:16px;stroke:currentColor;stroke-width:1.8;fill:none;stroke-linecap:round;stroke-linejoin:round}
.tb-btn.active{background:rgba(176,137,104,.1);border-color:var(--ac-light);color:var(--ac-d)}
.tb-btn.media{color:var(--ac)}
.tb-btn.media:hover{background:rgba(176,137,104,.08);border-color:var(--ac-light)}

.heading-dropdown{position:absolute;top:calc(100% + 6px);left:0;background:var(--bg-white);border:1px solid var(--border);border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,.1);padding:4px;min-width:140px;z-index:100;display:none}
.heading-dropdown.open{display:block;animation:dropIn .15s ease}
@keyframes dropIn{from{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}
.heading-opt{display:flex;align-items:baseline;gap:10px;padding:8px 12px;border-radius:5px;cursor:pointer;transition:.1s}
.heading-opt:hover{background:var(--bg)}
.heading-opt .h-label{font-family:'Noto Serif KR',serif;color:var(--tx);font-weight:600}
.heading-opt .h-size{font-size:10px;color:var(--tx-hint);font-family:'JetBrains Mono',monospace}
.heading-opt .h1{font-size:18px}
.heading-opt .h2{font-size:15px}
.heading-opt .h3{font-size:13px}

#floatingToolbar{position:fixed;z-index:999;background:#1c1a17;border-radius:8px;padding:4px;display:none;align-items:center;gap:1px;box-shadow:0 4px 20px rgba(0,0,0,.25),0 1px 4px rgba(0,0,0,.15);animation:popIn .12s ease}
@keyframes popIn{from{opacity:0;transform:scale(.95) translateY(3px)}to{opacity:1;transform:scale(1) translateY(0)}}
#floatingToolbar.show{display:flex}
#floatingToolbar::after{content:'';position:absolute;bottom:-5px;left:50%;transform:translateX(-50%);width:10px;height:10px;background:#1c1a17;clip-path:polygon(0 0, 100% 0, 50% 100%)}
.ft-btn{width:30px;height:28px;display:flex;align-items:center;justify-content:center;background:none;border:none;border-radius:5px;cursor:pointer;color:rgba(255,255,255,.75);font-size:13px;font-weight:700;font-family:'Pretendard',sans-serif;transition:.1s;flex-shrink:0}
.ft-btn:hover{background:rgba(255,255,255,.12);color:white}
.ft-btn svg{width:15px;height:15px;stroke:currentColor;stroke-width:2;fill:none}
.ft-sep{width:1px;height:14px;background:rgba(255,255,255,.15);margin:0 2px}
.ft-btn.highlight-btn{font-size:13px;font-weight:700;color:rgba(255,255,255,.8);letter-spacing:-0.5px}
.ft-btn.highlight-btn .hl-inner{background:rgba(251,191,36,.5);border-radius:3px;padding:1px 4px;font-size:12px;font-weight:700;color:white;line-height:1.3;letter-spacing:0}
.ft-btn.highlight-btn:hover .hl-inner{background:rgba(251,191,36,.8)}

.editor-scroll-area{flex:1;overflow-y:auto;display:flex;flex-direction:column;align-items:center}
.editor-content-wrap{width:100%;max-width:720px;padding:32px 40px 100px;display:flex;flex-direction:column;flex:1}

.ed-title{width:100%;background:none;border:none;font-family:'Pretendard',sans-serif;font-size:24px;font-weight:700;color:var(--tx);outline:none;letter-spacing:-.02em;margin-bottom:24px;line-height:1.35}
.ed-title::placeholder{color:var(--border-l)}
.ed-tags-wrap { display: none !important; }

.ed-body{width:100%;min-height:100%;outline:none;font-family:'Noto Sans KR','Apple SD Gothic Neo','Malgun Gothic',sans-serif;font-size:16px;line-height:2.0;letter-spacing:0;color:var(--tx);flex:1;word-break:keep-all;font-weight:400;font-feature-settings:'kern' 1}
.ed-body:empty::before{content:attr(data-placeholder);color:var(--border-l)}
.ed-body blockquote{border-left:3px solid var(--ac-light);padding:6px 14px;margin:12px 0;color:var(--tx-d);font-style:italic;background:var(--bg);border-radius:0 6px 6px 0}
.ed-body *:not(h1):not(h2):not(h3):not(blockquote):not(img):not(ul):not(ol):not(li):not(hr){font-family:'Noto Sans KR','Apple SD Gothic Neo','Malgun Gothic',sans-serif !important;font-size:16px !important;line-height:2.0 !important;letter-spacing:0 !important;font-weight:400 !important;color:var(--tx) !important;background:none !important}
.ed-body b,.ed-body strong{font-weight:700 !important}
.ed-body i,.ed-body em{font-style:italic !important}
.ed-body h1,.ed-body h2,.ed-body h3{font-family:'Noto Serif KR',serif;margin:20px 0 10px;font-weight:600}
.ed-body h1{font-size:22px}.ed-body h2{font-size:18px}.ed-body h3{font-size:15px}
.ed-body hr{border:none;border-top:1px solid var(--border);margin:24px 0}
.ed-body ul,.ed-body ol{padding-left:20px;margin:10px 0}
.ed-body img{max-width:100%;height:auto;display:block;margin:1.5em auto;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.08);border:1px solid var(--border-l);transition:box-shadow .2s;}
.ed-body img:hover{box-shadow:0 4px 16px rgba(0,0,0,.13);}
.ed-body p, .ed-body div { margin: 0; padding: 0; }

.ed-foot {
  padding: 10px 20px;
  border-top: 1px solid var(--border);
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--tx-m);
  background: var(--bg);
  z-index: 10;
  position: relative;
}
.ed-foot-loc {
  display: flex; align-items: center; gap: 5px;
  padding: 4px 10px 4px 8px; border-radius: 20px;
  border: 1px solid var(--border-l); background: var(--bg-white);
  font-size: 11.5px; color: var(--tx-m); cursor: pointer;
  font-family: 'Pretendard', sans-serif; transition: .15s;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  max-width: 280px;
}
.ed-foot-loc:hover { border-color: var(--ac-light); color: var(--ac); }
.ed-foot-loc svg { width: 12px; height: 12px; stroke: currentColor; stroke-width: 1.8; fill: none; flex-shrink: 0; }
.ed-foot-stats {
  display: flex; align-items: center; gap: 0;
  font-family: 'JetBrains Mono', monospace; font-size: 11.5px; color: var(--tx-m);
}
.ed-foot-stats span { color: var(--tx-d); font-weight: 500; }
.ed-foot-stats .fs-sep { width: 1px; height: 11px; background: var(--border-l); margin: 0 10px; }
.ed-foot-stats-wrap {
  position: absolute;
  left: 0; right: 0;
  display: flex; 
  justify-content: center;
  pointer-events: none;
  z-index: 1;
}
.ed-foot-stats {
  pointer-events: auto;
  background: var(--bg);
  padding: 0 10px;
}

.special-form{padding:20px 0;display:flex;flex-direction:column;gap:14px;border-bottom:1px solid var(--border);margin-bottom:20px}
.sf-field{display:flex;flex-direction:column;gap:6px}.sf-row{display:flex;gap:16px}
.sf-label{font-size:10px;font-weight:500;color:var(--tx-m);letter-spacing:.5px}
.sf-input{width:100%;background:var(--bg-white);border:1px solid var(--border);border-radius:var(--r-sm);padding:7px 10px;font-size:13px;color:var(--tx);font-family:'Pretendard',sans-serif;outline:none}
.sf-input::placeholder{color:var(--border-l)}.sf-input:focus{border-color:var(--ac-light);box-shadow:0 0 0 2px rgba(176,137,104,.08)}

::-webkit-scrollbar{width:4px;height:4px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}

.mobile-nav-btn{display:none}
.mobile-back-btn{display:none}

:::-webkit-scrollbar { width: 3px; height: 3px; }
:::-webkit-scrollbar-track { background: transparent; }
:::-webkit-scrollbar-thumb {
  background: var(--border);
  border-radius: 2px;
  min-height: 20px;
}
:::-webkit-scrollbar-thumb:hover { background: var(--tx-hint); }
* { scrollbar-width: thin; scrollbar-color: var(--border) transparent; }

/* 이미지 메뉴 */
.img-actions {
  display: flex; gap: 5px; opacity: 0; pointer-events: none;
  transition: opacity .18s ease, transform .18s ease;
  z-index: 100; transform: translateY(-3px);
}
.img-actions.show { opacity: 1; pointer-events: auto; transform: translateY(0); }
.img-action-btn {
  width: 32px; height: 32px; border-radius: 8px;
  background: rgba(28,26,23,.72); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
  border: none; cursor: pointer; display: flex; align-items: center; justify-content: center;
  color: rgba(255,255,255,.88); transition: background .15s;
}
.img-action-btn:hover { background: rgba(28,26,23,.92); color: white; }
.img-action-btn svg { width: 15px; height: 15px; stroke: currentColor; stroke-width: 1.8; fill: none; stroke-linecap: round; stroke-linejoin: round; }

.img-menu {
  width: 210px; background: white; border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0,0,0,.18), 0 2px 8px rgba(0,0,0,.1);
  border: 1px solid rgba(0,0,0,.06); overflow: hidden; z-index: 101; display: none;
  animation: menuIn .15s cubic-bezier(.2,.8,.2,1);
}
@keyframes menuIn { from { opacity:0; transform:scale(.95) translateY(-4px); } to { opacity:1; transform:scale(1) translateY(0); } }
.img-menu.open { display: block; }
.img-menu-date { padding: 10px 14px 8px; font-size: 11px; color: var(--tx-hint); font-weight: 400; border-bottom: 1px solid var(--border-l); }
.img-menu-item { display: flex; align-items: center; justify-content: space-between; padding: 11px 14px; font-size: 14px; color: var(--tx); cursor: pointer; transition: background .1s; gap: 8px; user-select: none; }
.img-menu-item:hover { background: #f8f6f2; }
.img-menu-item.danger { color: var(--red); }
.img-menu-item.danger:hover { background: #fdf2f2; }
.img-menu-item svg { width: 17px; height: 17px; stroke: currentColor; stroke-width: 1.6; fill: none; stroke-linecap: round; stroke-linejoin: round; flex-shrink: 0; opacity: .65; }

/* 메타바 */
.meta-bar-wrap { margin-top: auto; padding-top: 24px; display: flex; justify-content: center; width: 100%; }
.meta-bar{
  display:flex;align-items:center;gap:6px;
  padding:9px 14px; background:var(--bg-white);
  border:1px solid var(--border-l); border-radius:10px;
  width:100%; max-width:480px; box-shadow:0 2px 8px rgba(0,0,0,.03);
}
.meta-bar-type{font-weight:600;color:var(--ac);font-size:12px;flex-shrink:0;}
.meta-bar-dot{width:3px;height:3px;border-radius:50%;background:var(--tx-hint);flex-shrink:0;}
.meta-bar-info{
  flex:1;display:flex;align-items:center;gap:5px;
  color:var(--tx-m);font-size:12px; overflow:hidden;white-space:nowrap;text-overflow:ellipsis;
}
.meta-bar-info svg{width:12px;height:12px;stroke:var(--tx-hint);stroke-width:1.8;fill:none;stroke-linecap:round;stroke-linejoin:round;flex-shrink:0;}
.meta-bar-more{
  width:28px;height:28px;border-radius:50%; border:1.5px solid var(--border);background:none;cursor:pointer;
  display:flex;align-items:center;justify-content:center; color:var(--tx-m);transition:.15s;flex-shrink:0;margin-left:auto;
}
.meta-bar-more:hover{border-color:var(--ac-light);color:var(--ac);background:rgba(176,137,104,.07);}
.meta-bar-more svg{width:14px;height:14px;stroke:currentColor;stroke-width:2;fill:none;}

/* 모달 오버레이 */
.modal-overlay{ position:fixed;inset:0; background:rgba(0,0,0,.42); backdrop-filter:blur(5px);-webkit-backdrop-filter:blur(5px); z-index:1000; display:flex;align-items:center;justify-content:center; padding:24px; opacity:0;pointer-events:none; transition:opacity .22s ease; }
.modal-overlay.open{opacity:1;pointer-events:auto;}
.modal-card{ width:100%;max-width:460px; background:var(--bg-white); border-radius:16px; box-shadow:0 24px 60px rgba(0,0,0,.22),0 4px 12px rgba(0,0,0,.1); overflow:hidden; transform:scale(.95) translateY(10px); transition:transform .26s cubic-bezier(.2,.8,.2,1); display:flex;flex-direction:column; }
.modal-overlay.open .modal-card{transform:scale(1) translateY(0);}
.modal-hdr{ display:flex;align-items:center; padding:16px 18px 14px; border-bottom:1px solid var(--border-l); }
.modal-title{font-size:15px;font-weight:700;color:var(--tx);flex:1;}
.modal-close{ width:28px;height:28px;border-radius:50%; background:var(--bg);border:none;cursor:pointer; display:flex;align-items:center;justify-content:center; color:var(--tx-m);transition:.12s; }
.modal-close:hover{background:var(--border);color:var(--tx-d);}
.modal-close svg{width:13px;height:13px;stroke:currentColor;stroke-width:2.5;fill:none;stroke-linecap:round;}
.modal-addr{ display:flex;align-items:flex-start;gap:12px; padding:14px 18px 12px; border-bottom:1px solid var(--border-l); }
.addr-icon{ width:34px;height:34px;border-radius:9px; background:rgba(176,137,104,.1); display:flex;align-items:center;justify-content:center;flex-shrink:0; }
.addr-icon svg{width:17px;height:17px;stroke:var(--ac);stroke-width:1.8;fill:none;stroke-linecap:round;stroke-linejoin:round;}
.addr-texts{display:flex;flex-direction:column;gap:2px;}
.addr-main{font-size:14px;font-weight:600;color:var(--tx);line-height:1.35;}
.addr-sub{font-size:12px;color:var(--tx-m);}
.modal-map-wrap{ padding:14px 16px 16px; background:var(--bg-white); }
.modal-map{ width:100%;height:240px; border-radius:10px;overflow:hidden; border:1px solid var(--border-l); box-shadow:0 2px 8px rgba(0,0,0,.07); position:relative; }
#mapCanvas{display:block;width:100%;height:100%;}

/* ═══════════════════════════════════════
   MOBILE (≤768px)
   ═══════════════════════════════════════ */
@media(max-width:768px){
  :root{--bg:#f7f5f0;--bg-card:#ffffff;--bg-side:#f7f5f0;--border:#e8e4dc;--border-l:#f0ede8;--tx:#1a1714;--tx-d:#4a453e;--tx-m:#8a8378;--tx-hint:#b0a898}
  body{background:var(--bg)}

  .app{position:relative;display:block;height:100vh;height:100dvh;overflow:hidden;width:100vw}
  .side{position:absolute;top:0;left:0;width:100%;height:100%;border-right:none;transition:transform .35s ease;background:var(--bg);z-index:10}
  .app.sidebar-closed .side{width:100% !important;min-width:100% !important;}
  .list-panel{position:absolute;top:0;left:0;width:100%;height:100%;transition:transform .35s cubic-bezier(.2,.8,.2,1),opacity .35s;background:var(--bg);z-index:20;transform:translateX(100%)}
  .editor{position:absolute;top:0;left:0;width:100%;height:100%;z-index:40;transform:translateX(100%);transition:transform .35s cubic-bezier(.2,.8,.2,1)}
  .app.view-list .list-panel{transform:translateX(0);opacity:1}
  .app.view-list .side{transform:translateX(-30%);opacity:.5}
  .app.view-editor .editor{transform:translateX(0)}
  .app.view-editor .list-panel{transform:translateX(0);opacity:1}

  .pc-sidebar-toggle{display:none !important}
  .mobile-nav-btn{display:flex !important;}

  .side-hdr{padding:16px 20px 12px;background:var(--bg);position:sticky;top:0;z-index:10;border-bottom:1px solid var(--border-l);height:auto;min-height:auto}
  .cat-avatar{width:44px;height:44px;border:2px solid white;box-shadow:0 2px 10px rgba(0,0,0,.08)}
  .brand{display:block;font-family:'Noto Serif KR',serif;font-weight:700;font-size:17px;color:var(--tx)}
  .sync-status{background:rgba(0,0,0,.03);padding:4px 10px;border-radius:12px}
  .side-scroll{padding-bottom:80px}
  .sec-border{border-bottom:none}
  .sec-t{font-size:13px;font-weight:700;text-transform:none;letter-spacing:0;color:var(--tx-hint);margin-bottom:16px;padding-left:4px}

  .quote-section{padding:20px}
  .q-card{background:linear-gradient(135deg,#fdfcf8,#f8f4ec);border-radius:16px;padding:24px 22px 20px;box-shadow:0 2px 12px rgba(0,0,0,.04);position:relative}
  .quote-mark{display:block;font-family:'Georgia',serif;font-size:48px;font-weight:900;color:#a09060;opacity:.15;line-height:1;position:absolute;top:10px;left:16px;pointer-events:none}
  .q-text{font-size:15px;font-weight:600;line-height:1.7;font-family:'Noto Serif KR',serif}
  .q-by{font-size:12px;color:var(--tx-d);font-weight:400;margin-top:10px}

  .side-nav{padding:0 16px 20px;border-bottom:none}
  .writing-grid{display:grid !important;grid-template-columns:1fr 1fr;gap:8px;padding:0}
  .side-menu{background:var(--bg-card);border-radius:12px;padding:14px 14px 12px;box-shadow:0 1px 4px rgba(0,0,0,.03);flex-direction:column;align-items:flex-start;gap:4px;border:1px solid transparent;overflow:hidden;font-weight:600}
  .side-menu.on{border-color:var(--border-l);box-shadow:0 4px 12px rgba(0,0,0,.06)}
  .side-menu::before{content:'';position:absolute;top:0;left:0;width:3px;height:100%;border-radius:3px 0 0 3px;display:block !important}
  .side-menu[data-tab="navi"]::before{background:#c4956a}
  .side-menu[data-tab="navi"]{border-color:rgba(196,149,106,.12)}
  .side-menu[data-tab="fiction"]::before{background:#6a9a6a}
  .side-menu[data-tab="fiction"]{border-color:rgba(106,154,106,.12)}
  .side-menu[data-tab="blog"]::before{background:#6a82a8}
  .side-menu[data-tab="blog"]{border-color:rgba(106,130,168,.12)}
  .side-menu[data-tab="book"]::before{background:#8a6a98}
  .side-menu[data-tab="book"]{border-color:rgba(138,106,152,.12)}
  .side-menu[data-tab="quote"]::before{background:#a09060}
  .side-menu[data-tab="quote"]{border-color:rgba(160,144,96,.12)}
  .side-menu[data-tab="memo"]::before{background:#7a8a8a}
  .side-menu[data-tab="memo"]{border-color:rgba(122,138,138,.12)}
  .side-menu-l{font-size:14px;font-weight:600;color:var(--tx);letter-spacing:-.2px}
  .badge-pill{font-size:20px;font-weight:800;color:var(--tx-hint);font-family:'Pretendard',sans-serif}
  .wi-arrow{display:block;position:absolute;right:12px;top:50%;transform:translateY(-50%);font-size:14px;color:var(--tx-hint);opacity:.5}

  .chk-table{gap:4px}
  .chk-week-hdr{display:flex !important;margin-bottom:3px}
  .chk-week-hdr-spacer{width:90px;flex-shrink:0}
  .chk-week-hdr .day-labels{display:flex;flex:1}
  .chk-week-hdr .day-lbl{flex:1;text-align:center;font-size:9px;color:var(--tx-hint)}
  .chk-row{background:var(--bg-card);border-radius:10px;overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.04);height:48px;padding:0;border:none;gap:0;position:relative}
  .chk-blob{position:absolute;border-radius:50%;pointer-events:none;opacity:.25}
  .chk-pct{position:absolute;top:5px;left:8px;font-size:7px;font-weight:700;color:rgba(0,0,0,.25);z-index:2}
  .chk-left{width:90px;flex-shrink:0;z-index:1;padding:0 4px 0 10px;display:flex;align-items:center;min-width:unset;gap:0}
  .chk-info{display:none}
  .chk-lb{font-size:12px;font-weight:400;color:var(--tx);width:auto;min-width:auto;white-space:nowrap}
  .chk-total{display:none}
  .chk-dots{display:flex;flex:1;z-index:1;align-items:center;justify-content:space-around;padding-right:6px;gap:0;margin-left:0}
  .chk-dot{width:18px;height:18px;border-radius:0;background:none;border:none;display:flex;align-items:center;justify-content:center;font-size:0;color:transparent;margin:0;flex-shrink:0}
  .chk-dot::before{content:'';display:block;width:4px;height:4px;border-radius:50%;border:1px solid #bbb}
  .chk-dot.done::before{display:none}
  .chk-dot.done::after{content:'✓';font-size:14px;font-weight:500;color:var(--ac);font-family:-apple-system,sans-serif;line-height:1}
  .chk-dot.today::before{border-color:var(--ac);width:5px;height:5px}
  .chk-dot.today.done::before{display:none}
  .chk-dot.today.done::after{color:var(--ac)}

  .st-card{display:none}
  .stats-wrap{display:flex;gap:0;padding:16px 0 24px}
  .stat-col{flex:1;display:flex;flex-direction:column;align-items:center;text-align:center;gap:3px;padding:0 12px}
  .stat-col+.stat-col{border-left:1px solid var(--border-l)}
  .stat-label{font-size:11px;color:var(--tx-m);font-weight:500;margin-bottom:6px}
  .stat-big{font-size:22px;font-weight:400;color:var(--tx);line-height:1.1;letter-spacing:-1px;font-family:'JetBrains Mono',monospace}
  .stat-sub{font-size:11px;color:var(--tx-hint);margin-top:4px}
  .stat-big .unit{font-size:14px;letter-spacing:0;color:var(--tx-m);font-family:'Pretendard',sans-serif}

  .col-header{height:56px;min-height:56px}
  .lp-hdr{background:var(--bg);border-bottom:1px solid var(--border-l);height:56px;min-height:56px}
  .pane-list, .pane-photo, .pane-calendar { padding-bottom:120px !important; overflow-x:hidden; }
  .lp-month-hdr{font-size:12.5px;font-weight:800;color:var(--tx);padding:14px 16px 8px;background:var(--bg);letter-spacing:0;border-bottom:1px solid var(--border-l)}
  .lp-item{padding:12px 16px;gap:14px;border-bottom:1px solid var(--border-l);align-items:flex-start;overflow:visible;position:relative;transition:transform .2s ease}
  .lp-item:active{background:rgba(0,0,0,.02)}
  .lp-item.on{background:#ede8e0;border-left:3px solid transparent}
  .lp-item-actions{display:none !important}

  .swipe-actions{display:flex;position:absolute;top:0;left:100%;height:100%;z-index:1}
  .swipe-action{display:flex;align-items:center;justify-content:center;width:80px;height:100%;color:white;font-size:13px;font-weight:700;cursor:pointer}
  .swipe-action.pin-action{background:var(--ac)}
  .swipe-action.del-action{background:var(--red)}
  .swipe-action svg{width:20px;height:20px;stroke:white;stroke-width:2.5;fill:none;stroke-linecap:round;stroke-linejoin:round;margin-bottom:4px}
  .swipe-action span{display:flex;flex-direction:column;align-items:center;gap:2px;font-size:11px}

  .lp-text-wrap{gap:3px}
  .lp-item-title{font-size:14.5px;font-weight:700;color:var(--tx);line-height:1.35;padding-right:0}
  .lp-item-preview{font-size:13.5px;color:var(--tx-m);line-height:1.5;font-weight:400;-webkit-line-clamp:2}
  .lp-item-meta{font-size:11px;color:var(--tx-hint);margin-top:3px;font-weight:400}
  .quote-txt{font-size:15px;font-weight:500}

  .fab-btn{display:flex;align-items:center;justify-content:center;position:fixed;bottom:32px;right:24px;width:60px;height:60px;border-radius:50%;background:var(--yellow);color:white;border:none;box-shadow:0 6px 20px rgba(251,191,36,.4);cursor:pointer;z-index:90;transition:transform .1s}
  .fab-btn svg{width:28px;height:28px;stroke:white;stroke-width:2.5;stroke-linecap:round;stroke-linejoin:round;fill:none}
  .fab-btn:active{transform:scale(.9)}

  .ed-topbar{padding-top:calc(env(safe-area-inset-top) + 10px);padding-bottom:10px;padding-left:16px;padding-right:16px;background:var(--yellow);border-bottom:none;height:auto;min-height:calc(env(safe-area-inset-top) + 56px);align-items:center}
  .ed-header-date{
    font-size:14px;font-weight:400;color:white;
    position:static;transform:none;
    flex:1;text-align:center;
    overflow:hidden;text-overflow:ellipsis;white-space:nowrap;
  }
  .ed-top-btn.pc-only{display:none}
  .ed-save-status{display:none}
  .ed-btn-done{display:block;color:white;font-weight:400;background:none;border:none;font-size:16px;cursor:pointer;font-family:'Pretendard',sans-serif;padding:10px 0 10px 10px;margin-left:auto;flex-shrink:0;white-space:nowrap}
  .mobile-back-btn{display:none !important}
  .toolbar{display:none !important}

  .editor-content-wrap{padding:20px 20px 200px}
  .ed-title{font-size:26px;font-weight:700;margin-bottom:16px}
  .ed-body{font-size:16px;line-height:2.0;letter-spacing:0}
  .sf-row{flex-direction:column;gap:12px}

  .ed-foot{
    padding:10px 20px 22px;
    justify-content:center;
    background:var(--bg-white);
  }
  .ed-foot-stats-wrap{display:none;}
  .ed-foot-loc{
    max-width:100%;
    padding:6px 16px;
  }
}
